<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="manifest" href="manifest.json">
		<title>Dice Balatro</title>
		<link rel="stylesheet" href="style/dice.css" />
		<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- LOAD IN JOKERS -->
		<script src="class/jokers/Joker.js" defer></script>
		<script src="class/jokers/ChipButty.js" defer></script>
		<script src="class/jokers/EvensSteven.js" defer></script>
		<script src="class/jokers/ExtraInterest.js" defer></script>
		<!-- LOAD IN VOUCHERS -->
		<script src="class/vouchers/Voucher.js" defer></script>
		<script src="class/vouchers/FreeRoll.js" defer></script>
		<script src="class/vouchers/MoreHandy.js" defer></script>
		<!-- LOAD IN THE MAIN CLASSES -->
		<script src="class/Die.js" defer></script>
		<script src="class/Game.js" defer></script>
		<script src="class/UiManager.js" defer></script>
		<script src="class/ScoreManager.js" defer></script>
		<script>
		    var diceGame, ui, scoreMgr, jokers, vouchers;
			
			function init(){
				ui = new UiManager();
				scoreMgr = new ScoreManager();
				diceGame = new Game();
				//Define the available Jokers
				jokers = new Map([
					[ 'Joker', Joker ],
					[ 'EvensSteven', EvensSteven ],
					[ 'ChipButty', ChipButty ],
					[ 'ExtraInterest', ExtraInterest ]
			    ]);
			    diceGame.initJokers(jokers);
			    //Define the available vouchers
			    vouchers = new Map([
			    	[ 'Voucher', Voucher ],
			    	[ 'FreeRoll', FreeRoll ],
			    	[ 'MoreHandy', MoreHandy ]
			    ]);
			    diceGame.initVouchers(vouchers);
				//TESTING HERE
				test(diceGame);
			}
			//game = new(gameDict.get(name))(parseInt(diff));
			
			function test(game){
				//Get the evens joker and add to the game for free
				game.addJokerByName('EvensSteven');
				game.addJokerByName('ChipButty');
				
			}
		</script>
	</head>
<body onload="init()">
	<div id="game" class="w3-row-padding" style="height: 100%">
		<div id="menu" class="w3-col s4 w3-black">
			<div id="menuHeader">
				<h4 id="currentRoundTitle">
					Choose Your Next Blind
				</h4>
				<h3>
					<span id="currentRoundRequirements"></span
					><span id="currentRoundStake"></span>
				</h3>
			</div>
			<div class="w3-container w3-green w3-border-white w3-round-xxlarge w3-center w3-xlarge roundScore">
				<span id="roundScore">0</span>
			</div>
			<div id="handScore" class="w3-container w3-center w3-xlarge">
				<span id="chips" class="w3-blue">0</span> x <span id="multiplier" class="w3-red">0</span><span class="w3-hide"> = </span><span id="currentScore" class="w3-purple w3-hide">0</span>
				<span id="handScoreTooltip" class="tooltip"></span>
			</div>
			<section id="scoreSection w3-row-padding w3-container">
				<div id="helpBtnsDiv" class="w3-col s4">
						<br>
						<button 
							id="runInfo" 
							onclick="ui.openRunInfoModal()"
							class="w3-btn w3-bar w3-red w3-text-white w3-round w3-small"
						>
						Run<br>Info</button>
						<br><br>
						<button 
							id="options" 
							onclick="ui.openOptionsModal()"
							class="w3-btn w3-bar w3-orange w3-text-white w3-round w3-small"
						>Options<br></button>
					</div>
					<div id="scoreTotalsDiv" class="w3-col s8 w3-center">
						<div id="handsInfo" class="w3-col s6">
							<p class="w3-black w3-text-white w3-small" style="padding:0; margin:0;">Hands</p>
							<span id="currentRoundHands" class="w3-xlarge w3-text-blue" style="padding:0; margin:0;">3</span>
						</div>
						<div id="rerollsInfo" class="w3-col s6">
							<p class="w3-black w3-text-white w3-small" style="padding:0; margin:0;">Rerolls</p>
							<span id="currentRoundRerolls" class="w3-xlarge w3-text-red" style="padding:0; margin:0;">3</span>
						</div>
						<div style="width:100%; padding:0; margin:0;">
							<p class="w3-xlarge w3-text-yellow w3-center" style="padding:0; margin:0;">Â£<span id="currentCash">0</span></p>
						</div>
						<div id="anteInfo" class="w3-col s6">
							<p class="w3-black w3-text-white w3-small" style="padding:0; margin:0;">Ante</p>
							<span class="w3-text-white w3-large"><span id="runAntes" class="w3-xlarge w3-text-orange" style="padding:0; margin:0;">1</span> / 8</span>
						</div>
						<div id="roundInfo" class="w3-col s6">
							<p class="w3-black w3-text-white w3-small" style="padding:0; margin:0;">Round</p>
							<span id="runRounds" class="w3-xlarge w3-text-orange" style="padding:0; margin:0;">0</span>
						</div>
				</section>
				<!--button onclick="toggleFullScreen()">Full Screen</button-->
				<button onclick="ui.openShopModal()">Shop</button>
			</div>

			<div id="mainGameSection" class="w3-col s8">
			
				<div id="jokerRow" class="w3-row-padding w3-border-white w3-padding-large w3-display-container">
					<!-- Filled by game. -->
				</div>

				<div id="diceTray" class="w3-darkgray w3-col s12 w3-center">
					<h2 id="currentHandText" class="w3-center w3-darkgray w3-text-white"></h2>
					<div id="diceRow" class="w3-row-padding w3-content">
						<!-- DEFINE THE DICE HERE-->
						<div id="Starting_D4" class="die w3-col w3-tooltip" style="width:20%">
							<span id="Starting_D4_Tooltip" class="w3-text w3-small w3-red" style="position:absolute; top:70px;">D4</span>
							<img id="Starting_D4_Image" src="images/plain_d4.png" />
							<span id="Starting_D4_Value" class="w3-text-white">4</span>
						</div>
						<div id="Starting_D6" class="die w3-col w3-tooltip" style="width:20%">
							<span id="Starting_D6_Tooltip" class="w3-text w3-small w3-red" style="position:absolute; top:70px;">D6</span>
							<img id="Starting_D6_Image" src="images/plain_d6.png" />
							<span id="Starting_D6_Value" class="w3-text-white">6</span>
						</div>
						<div id="Starting_D8" class="die w3-col w3-tooltip" style="width:20%">
							<span id="Starting_D8_Tooltip" class="w3-text w3-small w3-red" style="position:absolute; top:70px;">D8</span>
							<img id="Starting_D8_Image" src="images/plain_d8.png" />
							<span id="Starting_D8_Value" class="w3-text-white">8</span>
						</div>
						<div id="Starting_D10" class="die w3-col w3-tooltip" style="width:20%">
							<span id="Starting_D10_Tooltip" class="w3-text w3-small w3-red" style="position:absolute; top:70px;">D10</span>
							<img id="Starting_D10_Image" src="images/plain_d10.png" />
							<span id="Starting_D10_Value" class="w3-text-white">10</span>
						</div>
						<div id="Starting_D12" class="die w3-col w3-tooltip" style="width:20%">
							<span id="Starting_D12_Tooltip" class="w3-text w3-small w3-red" style="position:absolute; top:70px;">D12</span>
							<img id="Starting_D12_Image" src="images/plain_d12.png" />
							<span id="Starting_D12_Value" class="w3-text-white">12</span>
						</div>
					</div>
					<br>
					<div id="buttons" class="w3-row-padding w3-container w3-center">
						<!--button onclick="diceGame.rollAllDice()">Roll All Dice</button-->
						<div class="w3-col s6">
							<button id="rerollBtn" class="w3-button w3-round w3-red" disabled onclick="diceGame.rollSelectedDice()"> ðŸŽ² Re-Roll</button>
						</div>
						<div class="w3-col s6">		
							<button id="scoreBtn" class="w3-button w3-round w3-green" disabled onclick="diceGame.scoreSelectedDice()">ðŸŒŸ Score</button>
						</div>
					</div>
				</div>
			</div>

			<div id="anteScoreModal" class="w3-modal">
				<div class="w3-modal-content w3-black">
					<div class="w3-container">
						<span 
							onclick="document.getElementById('runInfoModal').style.display='none'; ui.showShopModal()" 
							class="w3-button w3-red w3-display-topright"
						>&times;</span>
						
						<div id="anteScoreDiv" class="w3-container w3-border">
							
						</div>


			<div id="runInfoModal" class="w3-modal">
				<div class="w3-modal-content w3-black">
					<div class="w3-container">
						<span onclick="document.getElementById('runInfoModal').style.display='none'" class="w3-button w3-red w3-display-topright">&times;</span>
						<div class="w3-bar w3-darkgray">
							<button class="w3-bar-item w3-button tablink w3-green" onclick="ui.openRunInfoTab(event,'PokerHands')">Poker Hands</button>
							<button class="w3-bar-item w3-button tablink" onclick="ui.openRunInfoTab(event,'Blinds')">Blinds</button>
							<button class="w3-bar-item w3-button tablink" onclick="ui.openRunInfoTab(event,'Vouchers')">Vouchers</button>
							<button class="w3-bar-item w3-button tablink" onclick="ui.openRunInfoTab(event,'Stakes')">Stakes</button>
							<!--button class="w3-bar-item w3-button w3-red tablink" onclick="openRunInfo()">Close Run Info Modal</button-->
						</div>
						
						<div id="PokerHands" class="w3-container w3-border tab">
							<h2>Poker Hands</h2>
							<table class="w3-table-all w3-text-black" id="pokerHandsTable">
								
							</table>
							<br><br>
						</div>
					
						<div id="Blinds" class="w3-container w3-border tab" style="display:none">
							<h2>Blinds</h2>
							<div id="blindsDiv" class="w3-row-padding">
								<div id="smallBlindDiv" class="w3-col w3-third w3-center">
									<h2 id="smallBlindStatus" class="w3-red">Current</h2>
									<h3 id="smallBlindName" style="border:6px solid cyan" class="w3-indigo w3-text-white w3-round-xxlarge">Small Blind</h3>
									<h2 class="smallBlindIcon w3-blue w3-border w3-round">Small Blind</h2>
									<h2 id="smallBlindScore" class="w3-black">Score at least: 300</h2>
									<h2 class="w3-center">or</h2>
									<div id="smallBlindSkipRewardDiv">
										<img src="" />
										<button id="smallBlindSkipBtn">Skip Reward</button>
									</div>
								</div>
								<div id="bigBlindDiv" class="w3-col w3-third w3-center">
									<h2 id="bigBlindStatus" class="w3-orange">Upcoming</h2>
									<h3 id="bigBlindName" style="border:6px solid orange" class="w3-brown w3-text-white w3-round-xxlarge">Big Blind</h3>
									<h2 class="bigBlindIcon w3-orange w3-text-brown w3-border w3-round">Big Blind</h2>
									<h2 id="bigBlindScore" class="w3-black">Score at least: 500</h2>
									<h2 class="w3-center">or</h2>
									<div id="bigBlindSkipRewardDiv">
										<img src="" />
										<button id="bigBlindSkipBtn" disabled>Skip Reward</button>
									</div>
								</div>
								<div id="bossBlindDiv" class="w3-col w3-third w3-center">
									<h2 id="bossBlindStatus" class="w3-orange">Upcoming</h2>
									<h3 id="bossBlindName" style="border:6px solid yellow" class="w3-amber w3-text-white w3-round-xxlarge">The Twat</h3>
									<h2 id="bossBlindIcon" class="w3-yellow w3-text-brown w3-border w3-round">TWAT</h2>
									<h4 id="bossBlindEffect" class="w3-text-white">Must score 5 dice</h4>
									<h2 id="bossBlindScore" class="w3-black">Score at least: 1200</h2>
									<!--CANNOT SKIP BOSS BLINDS -->
								</div>
							</div>
							<br><br>
						</div>
					
						<div id="Vouchers" class="w3-container w3-border tab" style="display:none">
							<h2>Vouchers</h2>
							<p>No Vouchers Redeemed</p>
						</div>
						
						<div id="Stakes" class="w3-container w3-border tab" style="display:none">
							<h2>Stakes</h2>
							<p>No Stake.</p>
						</div>
					</div>
				</div>
			</div>


			<div id="optionsModal" class="w3-modal">
				<div class="w3-modal-content">
					<div class="w3-container">
						<span onclick="document.getElementById('optionsModal').style.display='none'" class="w3-button w3-red w3-display-topright">&times;</span>
						<div class="w3-bar">
							<button class="w3-bar-item w3-button tablink w3-green" onclick="ui.openOptionsTab(event,'Settings')">Settings</button>
							<button class="w3-bar-item w3-button tablink" onclick="ui.openOptionsTab(event,'Audio')">Audio</button>
							<button class="w3-bar-item w3-button tablink" onclick="ui.openOptionsTab(event,'Graphics')">Graphics</button>
							<button class="w3-bar-item w3-button tablink" onclick="ui.openOptionsTab(event,'Stats')">Stats</button>
							<!--button class="w3-bar-item w3-button w3-red tablink" onclick="openRunInfo()">Close Run Info Modal</button-->
						</div>
						
						<div id="Settings" class="w3-container w3-border tab">
							<h2>Settings</h2>
							<table class="w3-table">
							</table>
						</div>
					
						<div id="Audio" class="w3-container w3-border tab" style="display:none">
							<h2>Audio</h2>
							<p>Audio.</p> 
						</div>
					
						<div id="Graphics" class="w3-container w3-border tab" style="display:none">
							<h2>Graphics</h2>
							<p>No Graphics</p>
						</div>
						
						<div id="Stats" class="w3-container w3-border tab" style="display:none">
							<h2>Stats</h2>
							<p>No Stats.</p>
						</div>
					</div>
				</div>
			</div>

			<div id="shopModal" class="w3-modal">
				<div class="w3-modal-content">
					<div class="w3-container">
						<span onclick="document.getElementById('shopModal').style.display='none'" class="w3-button w3-red w3-display-topright">&times;</span>
						<h1>Shop</h1>
						<div id="mainShopArea">
							<div id="shopCardRow" class="w3-row-padding">
								<div class="w3-col s3">
									<button onclick="document.getElementById('shopModal').style.display='none'" class="w3-button w3-bar w3-padding-large w3-orange">Next Round</button>
									<br>
									<button onclick="ui.rerollShop()" class="w3-button w3-bar w3-padding-large w3-green">Reroll Â£4</button>
								</div>
								<div class="w3-col s9">
									<div id="shopCardCardsRow" class="w3-row-padding">
										<h3>Cards</h3>
									</div>
								</div>
							</div>
							<div id="voucherPackRow">
								<div class="w3-col s3">
									<h3 class="w3-tooltip">
										<span 
											class="w3-text w3-small w3-black w3-text-white" 
											style="position:absolute; top:2rem"
										>One Per Round</span>
										Vouchers</h3>
									<div id="voucherRow" class="w3-row-padding">

									</div>
								</div>
								<div class="w3-col s3">
									<h3 class="w3-tooltip">
										<span 
											class="w3-text w3-small w3-black w3-text-white" 
											style="position:absolute; top:2rem"
										>One Per Shop</span>
										Dice Upgrades</h3>
									<div id="diceUpgradeRow" class="w3-row-padding">

									</div>
								</div>
								<div class="w3-col s6">
									<h3 class="w3-tooltip">
										<span 
											class="w3-text w3-small w3-black w3-text-white" 
											style="position:absolute; top:2rem"
										>Two Per Shop</span>
										Booster Packs
									</h3>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>


	</body>
</html>